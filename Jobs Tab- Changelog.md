# Jobs Tab - Changelog

## 2026-01-19 (Latest)

### Infrastructure & Backend (`Server Backend/jobs/`)
- **Routing**: Configured `core/urls.py` to route `/api/jobs/` to the Jobs app.
- **Database (`db_models.py`)**:
    - Created MongoDB collections: `jobs_accounts`, `jobs_listings`, `jobs_ratings`, `jobs_reports`, `jobs_moderation_cases`, `jobs_audit_log`, `jobs_config`.
    - Implemented Indexes for performance (`geo`, `text`, `hashed`).
    - Added Profile Fields: `profile_pic`, `jobs_completed_count`, `rating_avg`, `rating_count`.
    - Added Listing Fields: `employer_pic`, `employer_rating`, `employer_jobs_count` (injected via view).
- **API Endpoints (`views.py`)**:
    - **Auth**: `register` (w/ profile_pic), `login`, `logout` (stateless), `delete_account`.
    - **Listings**:
        - `create_listing`: Basic validation.
        - `search_listings`: Supports `zip`, `category`, `limit`, `cursor`.
        - `accept_job`: Assigns worker to job.
        - `complete_job`: Marks job done, increments `jobs_completed_count`.
    - **Ratings**: `submit_rating` (0-100 scale, mutual), updates target's average rating.
    - **Moderation**: `report_target` (auto-strikes), `run_analyst` (Gemini integration).
- **Management Commands**:
    - `prune_jobs.py`: Deletes old listings (>30 days) and reports (>90 days).

### Frontend (`Android Frontend/Sentinel - Android/lib/`)
- **Service (`JobsService`)**:
    - Implemented HTTP methods for all API endpoints.
    - Added Persistence via `SharedPreferences` (Token, Account ID).
    - Fixed URL construction to correct `404` error (Now using `/api/jobs/`).
    - Added fallback to `10.0.2.2` for Android Emulator localhost access.
- **UI Components (`jobs_module.dart`)**:
    - **JobsAuthGate**: Manages auth state and selects View.
    - **JobsDashboard**: Main tab view with Listings list.
    - **JobCard**: Displays Job details + **Employer Profile** (Avatar, Stars, Stats).
    - **CreateJobDialog**: Form to post new jobs.
    - **RateJobDialog**: 100-point slider & comment field for rating employers.
    - **ReportDialog**: Simple flagging interface.

### Security & Policy
- **Auth**: JWT-based (Bearer Token).
- **Moderation**:
    - "Fail-closed" design.
    - Auto-actions on reports (Shadowban/Suspend).
    - Gemini AI Analyst integration for case review.
- **Privacy**: No permanent logs for deleted accounts (Pruning enabled).

---
*Generated by Sentinel AI System*
